{% extends "base.html" %}

{% block title %}The Oracle of Thebes{% endblock %}

{% block content %}
<div class="oracle-container text-center">
    <div class="oracle-icon">ð“‚€</div>
    <h1 class="mt-3 mb-4">The Oracle of Thebes</h1>
    <p class="mb-4 fst-italic">Whisper your request to the ether... and the gods may answer.</p>
    <form method="get" action="/ask" onsubmit="showSpinner()" class="d-flex justify-content-center">
        <input type="text" name="url" class="form-control me-2 w-75" placeholder="http://internal-api:8000" required>
        <button type="submit" class="btn btn-consult">Consult</button>
    </form>
    <div class="spinner-border text-warning mt-4" role="status" id="loadingSpinner">
        <span class="visually-hidden">Consulting the Oracle...</span>
    </div>

    {% if debug %}
    <div class="mt-5 text-start">
        <h5 class="text-warning">ðŸ”§ Debug Tools</h5>
        <ul class="list-unstyled small">
            <li><a href="/ask?url=http://internal-api:8000/" class="link-warning">ðŸ§ª Test /</a></li>
            <li><a href="/ask?url=http://internal-api:8000/admin/" class="link-warning">ðŸ§ª Test /admin/</a></li>
            <li><a href="/ask?url=http://internal-api:8000/admin/scrolls/73/prophecy" class="link-warning">ðŸ§ª Test FLAG</a></li>
        </ul>
    </div>
    {% endif %}
</div>

<script>
    function showSpinner() {
        document.getElementById('loadingSpinner').style.display = 'inline-block';
    }
</script>
{% endblock %}
